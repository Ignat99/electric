<!-- need 5IN -->

<!-- HEADER 9-4-4: Special Spice and Verilog Nodes -->

<!-- COMMAND Tools/Simulation (Spice)/Set Generic Spice Template -->
<!-- COMMAND Tools/Simulation (Spice)/Set Spice 2 Template -->
<!-- COMMAND Tools/Simulation (Spice)/Set Spice 3 Template -->
<!-- COMMAND Tools/Simulation (Spice)/Set Ngspice Template -->
<!-- COMMAND Tools/Simulation (Spice)/Set HSpice Template -->
<!-- COMMAND Tools/Simulation (Spice)/Set PSpice Template -->
<!-- COMMAND Tools/Simulation (Spice)/Set GnuCap Template -->
<!-- COMMAND Tools/Simulation (Spice)/Set Xyce Template -->
<!-- COMMAND Tools/Simulation (Spice)/Set SmartSpice Template -->
<!-- COMMAND Tools/Simulation (Spice)/Set CDL Template -->
<!-- COMMAND Tools/Simulation (Spice)/Set Assura HSpice Template -->
<!-- COMMAND Tools/Simulation (Spice)/Set Calibre Spice Template -->
<!-- COMMAND Tools/Simulation (Verilog)/Set Verilog Template -->
<!-- COMMAND Tools/Simulation (Verilog)/Set Verilog Default Parameter -->

For both Spice and Verilog, you can place special nodes in your circuit that augment the generated deck.
Spice even has a predefined set of these nodes, available from the "Spice" entry in the component menu.
A second set, called "SpicePartsS3", is tailored towards Spice3
(use the Spice/CDL Preferences in menu <B>File / Preferences...</B>, "Tools" section, "Spice/CDL" tab,
to switch to this set).
There are no Verilog nodes in the current release of Electric.
Users who define new nodes for Spice or Verilog are encouraged to share these with the entire community by contacting
<A HREF="mailto:info@staticfreesoft.com">Static Free Software</A>.
<P>
Users can define their own Spice or Verilog nodes by creating new icon cells.
The icon cell should have:
<UL>
<LI>Graphics.  This is an icon cell, so it typically will have nodes from the Artwork technology to describe its appearance.
See <A HREF="chap07-06-01.html#chap07-06-01">Section 7-6-1</A> for more on the Artwork technology.</LI>
<LI>Exports (optional).  This allows the icon cell to be connected to the circuitry.</LI>
<LI>Parameters (optional).  This allows custom values to be specified on each node.
Parameters are created with the <B>Cell Parameters...</B> command (in menu <B>Edit / Properties</B>).
See <A HREF="chap06-08-05.html#chap06-08-05">Section 6-8-5</A> for more on parameters.</LI>
<LI>At least one template.  The template is the essential part of the Node because it describes exactly what Spice or Verilog will be emitted.
The Spice template is created with the <B>Set Generic Spice Template</B> command (in menu <B>Tools / Simulation (Spice)</B>).
If the template is specific to a particular version of Spice, use the appropriate template command
(<B>Set Spice 2 Template</B>, <B>Set Spice 3 Template</B>, <B>Set Ngspice Template</B>, <B>Set HSpice Template</B>, <B>Set PSpice Template</B>,
<B>Set GnuCap Template</B>, <B>Set SmartSpice Template</B>, <B>Set Xyce Template</B>, <B>Set CDL Template</B>,
<B>Set Assura HSpice Template</B>, or <B>Set Calibre Spice Template</B>).
You can also create a Verilog template by using the <B>Set Verilog Template</B> command (in menu <B>Tools / Simulation (Verilog)</B>).
And can customize instances of the current cell (by prepending per-instance parameters)
with <B>Set Verilog Default Parameter</B>.
Note that a single cell can contain both Verilog and Spice templates.
Once a template has been created, double-click on the text to edit it.</LI>
</UL>
<P>

<TABLE><TR><TD>
To explain the format of a template, a DC Voltage Source primitive is used as an example.
Graphics is placed to describe the look of the symbol (a "battery" look).
Exports are created at the top and bottom of the battery with the names "plus" and "minus".
</TD><TD><CENTER><IMG SRC="fig09-23.png" ALT="Figure 9.23"></CENTER></TD></TR></TABLE>
<P>
A single parameter is defined called "Voltage" with a default value of "0V".
Finally, a Spice template is created that has the string:<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE><FONT SIZE="-1">V$(node_name) $(plus) $(minus) DC $(Voltage)</FONT></CODE>
<P>
This string contains substitution expressions of the form <CODE>$(SOMETHING)</CODE>
where <CODE>SOMETHING</CODE> can be an export, a parameter, or "node_name".
In this example, <CODE>$(node_name)</CODE> will be replaced with the name of the voltage node;
<CODE>$(plus)</CODE> will be replaced with the net name attached to the positive export;
<CODE>$(minus)</CODE> will be replaced with the net name attached to the negative export;
and <CODE>$(Voltage)</CODE> will be replaced with the voltage value specified by the user.
<P>
When defining technologies, it is possible to place Spice templates onto primitive nodes
(see <A HREF="chap08-06.html#chap08-06">Section 8-6</A>).
These templates can make use of two additional substitution expressions:
<CODE>$(width)</CODE> and <CODE>$(length)</CODE> which access the size of the node.

<!-- TRAILER -->
